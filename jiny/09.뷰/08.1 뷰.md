# 뷰(view)
지니PHP 의 MVC패턴의 view를 처리하는 패키지 입니다. 뷰는 컨드롤러에 의해서 호출되며, 컨트롤러에서 작업한 결과물을 화면에 처리하여 http response로 반환을 합니다.
http response는 반환된 뷰의 화면을 브라우저로 전송하고, 브라우저는 전송받은 데이터를 기준으로 화면을 렌더링 하게 됩니다.

지니의 view는 별도의 페키지로 분리되어 있습니다. `view` 페키지는 기본적으로 탑제된 패키지입니다. 혹시 설치가 안되어 있다면 다음과 같이 컴포저를 통하여 재설치 할 수 있습니다.

```php
composer require jiny/view
```
필요시에는 내장 view 대신에 자체적으로 제작을 하거나 외부의 뷰를 결할 할 수 있습니다.


### 뷰의 호출
---
브라우저로 반환되는 화면을 생성하는 view는 컨트롤러에 의해서 호출이 됩니다. 



## 뷰 헬퍼함수

헬퍼함수는 프레임워크 내에서 장소에 구분없이 호출하여 사용을 할 수 있는 장점이 있습니다. 또한 클래스의 인스턴스를 가지고 있지 않은 상태에서도 호출을 할 수 있는 장점이 있습니다.

```php
view(파일명, 데이터);
```

`view()`헬퍼함수는 두개의 인자값을 가지고 있습니다. 첫번째는 파일명, 두번째는 데이터 입니다.



## 데이터 전달

뷰에서 필요한 데이터는 연상배열로 작성하여 전달합니다. 만일 사이트에 메뉴와 설정파일등의 값을 같이 전달하고자 한다면, 미리 사전에 데이터 배열을 생성하여 전달 하여야 합니다.

```php
// 메뉴 데이터를 읽어옵니다.
$viewData['menus'] = menu();

if ($ret = view($viewFile, $viewData)) {
    return $ret;
} else {
    echo "404 페이지가 없습니다. from pages!";
}

```
위의 예제는 기본 `pageController`에서 데이터를 전달하는 부분을 캡쳐한 것입니다.


## 뷰호출

컨트롤러는 작업한 데이터를 뷰로 전달하여 화면에 출력할 수 있습니다.

```
$viewFile = "home";
$viewData = [];
return $this->view($viewFile, $viewData);
```

`view()`는 컨트롤러에서 제공되는 뷰 호출 매서드 입니다. `view()`는 두개의 인자값을 전달 받습니다. 

첫번째 인자는 뷰파일의 이름 입니다. 뷰 파일 이름은 문자열로 되어 있습니다. 만일 서브구조로 되어 있다면 디렉토리 구분자를 이용하여 같이 사용할 수 있습니다.
```
$viewFile = "home";
$viewFile = "home/test";
```

뷰 파일은 환경설정에서 설정한 리소스 폴더 안에 있습니다. 뷰 파일의 확장자는 `.htm` 파일 입니다. 만일 확장자를 변경하고자 하는 경우에는 환경설정 값을 변경해 주셔야 합니다.

두번재는 뷰로 전달되는 데이터 입니다. 뷰데이터는 배열되 되어 있습니다.

## 뷰 클래스
뷰 클래스는 독립적으로 객체 입니다.

뷰 클래스는 입력된 뷰파일 과 데이터를 받아서 화면을 랜더링 처리 합니다.

컨트롤러에서는 작업한 데이터를 뷰 클래스를 통하여 화면에 출력할 수 있습니다. 

뷰 클래스의 호출은 컨트롤러에서 가능합니다.

```php
$this->view(뷰파일, 데이터);
```

클래스에서 호출이 가능한 `view`메서드는 두개의 인자값을 가지고 있습니다. 첫번째는 출력화면의 디자인을 가지고 있는 뷰 파일명 입니다.
뷰 파일은 리소스 폴더안에 위치합니다.

두번째 인자는 데이터 입니다. 데이터는 처리한 값을 뷰에게 전달하는 역활을 합니다.


## 레이아웃
컨덴츠 페이지 리소스들은 단일로 작성되는 경우도 있고 또 다른 중간 레이아웃이 존재할 수도 있습니다.